<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Tweet-a-watt-arduino by andrewmh20</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Tweet-a-Watt with Arduino Modifications</h1>
        <h2>Modified Kill-a-Watt based on Lady Ada's instructions http://www.ladyada.net/make/tweetawatt/index.html with the addition of an Arduino Ethernet</h2>
        <a href="https://github.com/andrewmh20/Tweet-a-Watt-Arduino" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">

<h3>Hardware:</h3>
<p>To set up the Xbee and Kill-a-Watt connection, I followed the instructions 
	by Lady Ada exactly (<a href="http://www.ladyada.net/make/tweetawatt/make.html">Make the hardware</a>), using the kid from Adafruit.com, except that instead of using analog inputs 0 and 4, I used A0 and A1. However, because of the close proximity of the resistors going into one hole, I used A4, but then routed it to A1 using a jumper wire underneath. A1 should work just as well, but make sure to change the code to reflect that change. To connect to the Arduino I hooked up the ground and 5V pins from the Xbee
breakout board to the Arduino, and hooked up TX to a Software Serial pin (I used A0 because of physical location).</p>
<h3>Python Script Modification:</h3>
<p>After downloading Lady Ada's python scripts I found that it was rather difficult to get the Twitter libraries installed on Windows.
	In order to fix that problem, since I was not concerned with tweeting in my project I just deleted all the lines referencing that library.</p>
	
<h3>Software:</h3>
<p>I wrote code for the Arduino to receive data over Xbee, parse it, average it, and send it over Ethernet 
	to a server. I used the website Cosm.com, formerly Pachube.com which, with the help of some of the Arduino
	example code, graphs the real time and historical data online.</p> 
<p>For the serial parser functions, the python code was very helpful, as was the online manual to the Xbee (<a href="http://ftp1.digi.com/support/documentation/90000982_B.pdf">Xbee Manual</a>), but when it came to actually calculating the voltage, current, and power from the raw ADC data, I used  my own methods. It should be noted that the Xbee only sends data for the inputs that are active. So in this case, no digital data was sent, only 2 analog channels. </p>
<p>The ADC data coming from the Xbee are 10 bit numbers between 0 and 1024, where ideally 512 is equivalent to 0 volts/amps, but that is not always the case. After receiving the data and isolating the ADC values, which are what we care about, they need to be converted to volts and amps. To do so I first 
</p>
<h3>External Sources:</h3>

<p>I used the Arduino Ethernet, SPI, Sotware Serial, avr, and avr/wdt libraries. The code is largely based on Lady Ada's python script but with some important modifications as explained above.</p>

<h3>Contact:</h3>

<p>Feel free to contact me with any questions about the project and its setup by email at <a href="mailto:andrewmh20@nyc.rr.com">andrewmh20@nyc.rr.com</a>!</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/andrewmh20/Tweet-a-Watt-Arduino/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/andrewmh20/Tweet-a-Watt-Arduino/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/andrewmh20/Tweet-a-Watt-Arduino"></a> This page is maintained by <a href="https://github.com/andrewmh20">andrewmh20</a>.</p>

          <p>This page was generated using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>